//autogenerated--------------------------------------------------------------------
// 
// This code was generated from material-ui v1.5.0 by reactxx-codemod tool
// (https://github.com/reactxx/reactxx/tree/master/codemod)
// 
//----------------------------------------------------------------------------------

//
import PropTypes from "prop-types"; // This is using the API from https://github.com/vesparny/brcast

export interface Broadcast<S> {
  setState(state: S): void;
  getState(): S;
  subscribe(callback: (state: S) => void): number;
  unsubscribe(subscriptionId: number): void;
}
export interface MuiContext<S> {
  __THEMING__?: Broadcast<S>;
}
export interface ThemeListener<S = {}> {
  initial(context: MuiContext<S>): S | null;
  subscribe(
    context: MuiContext<S>,
    callback: (state: S) => void
  ): number | null;
  unsubscribe(context: MuiContext<S>, subscriptionId: number): void;
} // Same value used by react-jss

export const CHANNEL = "__THEMING__";
const themeListener = {
  contextTypes: {
    [CHANNEL]: PropTypes.object
  },
  initial: context => {
    if (!context[CHANNEL]) {
      return null;
    }

    return context[CHANNEL].getState();
  },
  subscribe: (context, cb) => {
    if (!context[CHANNEL]) {
      return null;
    }

    return context[CHANNEL].subscribe(cb);
  },

  unsubscribe(context, subscriptionId) {
    if (context[CHANNEL]) {
      context[CHANNEL].unsubscribe(subscriptionId);
    }
  }
};
export default themeListener;
